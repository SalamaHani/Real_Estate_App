
datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}


generator client {
  provider = "prisma-client-js"
}



model Listing {
  id                   String      @id @default(auto()) @map("_id") @db.ObjectId
  agents               Agent[]
  always_email_agents  String?
  bathrooms            Int?
  bedrooms             Int?
  coordinates          Float[]        // [lng, lat]
  description          String
  full_bathrooms       Int?
  half_bathrooms       Int?
  is_rental            Boolean?
  listing_email        String?
  listing_status       String
  living_area          Int?
  location             Location
  lot_size             Float?
  make_notified        Boolean?
  mls_name             String?
  office_ids           String[]
  offices              Office[]
  photos               String[]
  price                Float?
  property_type        String
  schools_district     String?
  single_property_website String?
  url                  String?
  virtual_tour_url     String?
  year_built           Int?
  listing_source       String?
  caravan_end_time     String?
  caravan_food_offered String?
  caravan_notes        String?
  caravan_start_date   String?
  caravan_start_time   String?
  is_caravan           Boolean?
  favorites            Favorite[]
  interest      Interest[]
  @@map("listing")
}

type Agent {
  first_name               String
  last_name                String
  full_name                String
  email                    String
  photo                    String?
  office_line_number       String?
  mobile_phone_line_number String?
  brokerage_name           String
  broker_phone             String?
  broker_email             String?
  office_street_address    String?
  office_city              String?
  office_state             String?
  office_zip_code          String?
  office_name              String?
  franchise_name           String?
  social_media             SocialMedia?
}

type SocialMedia {
  facebook  String?
  instagram String?
  linkedin  String?
  pinterest String?
  twitter   String?
  youtube   String?
}

type Location {
  street_address String?
  unit_number    String?
  city           String?
  state          String?
  display_address Boolean?
  zip_code       String
  lng             Float?
  lat             Float?
  neighborhood   String?
  county         String?
}

type Office {
  brokerage_name       String
  broker_phone         String?
  broker_email         String?
  office_street_address String?
  office_city          String?
  office_state         String?
  office_zip_code      String?
  office_name          String?
  franchise_name       String?
}

model User {
  id            String    @id @map("_id")
  name          String
  email         String
  emailVerified Boolean
  image         String?
  createdAt     DateTime
  updatedAt     DateTime
  sessions      Session[]
  accounts      Account[]
  interest      Interest[]
  @@unique([email])
  @@map("user")
}

model Session {
  id        String   @id @map("_id")
  expiresAt DateTime
  token     String
  createdAt DateTime
  updatedAt DateTime
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([token])
  @@map("session")
}

model Account {
  id                    String    @id @map("_id")
  accountId             String
  providerId            String
  userId                String
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime
  updatedAt             DateTime
  @@map("account")
}

model Verification {
  id         String    @id @map("_id")
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime?
  updatedAt  DateTime?
  @@map("verification")
}
model Favorite {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  listingId String   @db.ObjectId
  userId    String   
  listing   Listing  @relation(fields: [listingId], references: [id], onDelete: Cascade)
  createdAt DateTime? 
  updatedAt DateTime? 
  @@map("favorite")
}

model Areacuntry {
  id                   String      @id @default(auto()) @map("_id") @db.ObjectId
  name                 String
  description          String
  living_area          Int?
  location             Location?
  photos               String[]
  property_type        String
  areaKm2              Float?    
  population           Int?    
  hospitalsCount       Int?    
  schoolsCount         Int? 
  Maps                 String?
  Catholic           Int?      
  Mosques            Int?     
  AboutAllCountry    Int?     
  AvgWorkCommute     Int?      
  MedianAge          Int?      
  MedianAreaIncome   Int?     
  MedianSalePrice    Int?     
  Stores             Int? 
  Universities       Int?
}

model Interest {
  id        String  @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  email     String
  user      User?   @relation(fields: [userId], references: [id])
  userId    String  
  agentemail String?
  listing   Listing? @relation(fields: [listingId], references: [id])
  listingId String  @db.ObjectId
  createdAt DateTime? @default(now())
   @@map("interest")
}